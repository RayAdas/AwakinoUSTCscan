我正在研究怎么写我的毕业论文，关于超声波C-Scan检测，并应用一些神经网络技术做缺陷检测和三维重建。

超声波C-Scan技术的扫描的原始数据可以视作一个三维数组，其中每个元素的(x,y,z)，x,y代表C扫平面的坐标(以下称为坐标点),z代表该坐标下采样点，而元素的值则代表该时间的回波信号强度。例如[1e-3,1e-3,1e-6]代表了位于C平面的1mm 1mm坐标处的点，在超声激励信号发射1微秒后的回波信号强度。 这样的三维原始数据和图片的原始数据具有显著的区别：图片数据只有两个维度是连续的（即在空间上连续）而第三个维度（无论是RGB,  HSV或者其它高维特征）中的各个层并没有连续性；而超声数据的第三个维度代表飞行时间或者深度，也具有连续性。

在本论文中，我们只关心第一个显著回波界面。即不考虑同一个坐标点下同时存在裂缝和底部边界，造成两次回波的情况。因此，可以得出一个真实数据集d = R(x,y)即对于一个特定的点(x, y)，可以唯一确定一个深度d。这个R就是本论文想要求得的映射关系。

传统的最简单的C-Scan方案会先计算每个点的ToF，将数据降维到2维然后针对这个二维数据处理。如果超声探头没有直径，可以精确地测量一个点下的回波，那么确实只需如此就可以得出R。
但实际超声波探头是具有直径的，每个坐标点处所采集到的信号并不只反映了该点的深度，超声探头的直径会导致整个直径区域内的待测物体形状均会对该点数据造成影响（即测量数据为实际数据的邻域卷积）。例如当超声探头处在两个不同深度的区域分界上时，探头一半在材料较薄处，一半在材料较厚处，若返回单一的ToF只能查看到单一的厚度值或者介于二者之间的值。这会导致产生的估计的轮廓不够锐利，无法准确反映原来的厚度情况。

这正是本论文中要解决的问题，即因为探头直径导致的重建结果不够锐利。在上面的例子中通过直接观察该点处的回波波形（而不是只观察单个回波时间），可以分析出薄区和厚区两个回波，这应当对于缺陷分析和三维重建更有帮助。
超声探头沿着x方向，从厚度5区域到厚度10区域移动时，其V(t)波形将会由一个t = 5/声速的单峰波形，过渡到双峰波形，再过渡到一个t = 10/声速的单峰波形。

数据集包含超声波回波的电压信号V(x,y,t)和实际的物件深度R(x,y)。仿真数据可以无限量生成，真实数据量有限，可考虑微调。

单个边界的超声回波模型如下，其具有7个待拟合参数，其中$\tau$与$\beta$对后续的缺陷检测与三维重建的重要性更高，但其它参数仍可以辅助训练：
$$\text{env}(t) = \beta \exp \left(-\alpha \left(1 - r \tanh \left(m \left(t - \tau\right)\right)\right) \left(t - \tau\right)^2\right)$$

$$s(t) = \text{env}(t) \cos \left(2\pi f_c \left(t - \tau\right) + \psi \left(t - \tau\right)^2 + \phi\right)$$

请设计一个完整的工程技术路线，用于解决这一问题。

一些我目前研究过的，可能有用的技术路线：
- 将信号处理数据，如包络（对仿真数据为env，对真实数据使用希尔伯特变换）一同输入
- 对于单个波形的特征提取或压缩，（因为我觉得直接输入原始的三维数组，输出底板形状的这种应该很难训练得出来）。先对z维度进行压缩，但会引出回波数量不定的问题，为了解决这一问题，又有
  - 输出heatmap，但是heatmap和输入等长，相当于没压缩
  - 使用transformer输出不定长参数，优势在于直接使用7个物理参数对这一部分的网络做训练，但是输入后续的缺陷检测或者重建时又需要再次编码
- 使用神经网络做tau的初始参数估计（精确到半波长级别），然后根据回波公式，将其转换为一个最优化问题。在半波长范围内，优化不再是一个非凸优化问题。

